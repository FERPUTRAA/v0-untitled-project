import { type ClassValue, clsx } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}

// Format duration in seconds to MM:SS format
export function formatDuration(durationInSeconds: number): string {
  const minutes = Math.floor(durationInSeconds / 60)
  const seconds = Math.floor(durationInSeconds % 60)
  return `${minutes.toString().padStart(2, "0")}:${seconds.toString().padStart(2, "0")}`
}

// Format date to relative time (e.g. "2 hours ago", "Yesterday", etc.)
export function formatRelativeTime(dateString: string): string {
  const date = new Date(dateString)
  const now = new Date()
  const diffInSeconds = Math.floor((now.getTime() - date.getTime()) / 1000)

  if (diffInSeconds < 60) {
    return "Just now"
  }

  const diffInMinutes = Math.floor(diffInSeconds / 60)
  if (diffInMinutes < 60) {
    return `${diffInMinutes} ${diffInMinutes === 1 ? "minute" : "minutes"} ago`
  }

  const diffInHours = Math.floor(diffInMinutes / 60)
  if (diffInHours < 24) {
    return `${diffInHours} ${diffInHours === 1 ? "hour" : "hours"} ago`
  }

  const diffInDays = Math.floor(diffInHours / 24)
  if (diffInDays === 1) {
    return "Yesterday"
  }

  if (diffInDays < 7) {
    return `${diffInDays} days ago`
  }

  // Format as date for older messages
  return date.toLocaleDateString("en-US", {
    year: "numeric",
    month: "short",
    day: "numeric",
  })
}

// Generate random avatar emoji
export function generateRandomAvatar(): string {
  const avatarEmojis = [
    "ðŸ˜€",
    "ðŸ˜ƒ",
    "ðŸ˜„",
    "ðŸ˜",
    "ðŸ˜†",
    "ðŸ˜…",
    "ðŸ˜‚",
    "ðŸ¤£",
    "ðŸ˜Š",
    "ðŸ˜‡",
    "ðŸ™‚",
    "ðŸ™ƒ",
    "ðŸ˜‰",
    "ðŸ˜Œ",
    "ðŸ˜",
    "ðŸ¥°",
    "ðŸ˜˜",
    "ðŸ˜—",
    "ðŸ˜™",
    "ðŸ˜š",
    "ðŸ˜‹",
    "ðŸ˜›",
    "ðŸ˜",
    "ðŸ˜œ",
    "ðŸ¤ª",
    "ðŸ¤¨",
    "ðŸ§",
    "ðŸ¤“",
    "ðŸ˜Ž",
    "ðŸ¤©",
    "ðŸ¥³",
    "ðŸ˜",
    "ðŸ˜’",
    "ðŸ˜ž",
    "ðŸ˜”",
    "ðŸ˜Ÿ",
    "ðŸ˜•",
    "ðŸ™",
    "â˜¹ï¸",
    "ðŸ˜£",
    "ðŸ˜–",
    "ðŸ˜«",
    "ðŸ˜©",
    "ðŸ¥º",
    "ðŸ˜¢",
    "ðŸ˜­",
    "ðŸ˜¤",
    "ðŸ˜ ",
    "ðŸ˜¡",
    "ðŸ¤¬",
    "ðŸ¤¯",
    "ðŸ˜³",
    "ðŸ¥µ",
    "ðŸ¥¶",
    "ðŸ˜±",
    "ðŸ˜¨",
    "ðŸ˜°",
    "ðŸ˜¥",
    "ðŸ˜“",
    "ðŸ¤—",
    "ðŸ¤”",
    "ðŸ¤­",
    "ðŸ¤«",
    "ðŸ¤¥",
    "ðŸ˜¶",
    "ðŸ˜",
    "ðŸ˜‘",
    "ðŸ˜¬",
    "ðŸ™„",
    "ðŸ˜¯",
    "ðŸ˜¦",
    "ðŸ˜§",
    "ðŸ˜®",
    "ðŸ˜²",
    "ðŸ¥±",
    "ðŸ˜´",
    "ðŸ¤¤",
    "ðŸ˜ª",
    "ðŸ˜µ",
    "ðŸ¤",
    "ðŸ¥´",
    "ðŸ¤¢",
    "ðŸ¤®",
    "ðŸ¤§",
    "ðŸ˜·",
    "ðŸ¤’",
    "ðŸ¤•",
    "ðŸ¤‘",
    "ðŸ¤ ",
    "ðŸ˜ˆ",
    "ðŸ‘¿",
    "ðŸ‘¹",
    "ðŸ‘º",
    "ðŸ¤¡",
    "ðŸ’©",
    "ðŸ‘»",
    "ðŸ’€",
    "â˜ ï¸",
    "ðŸ‘½",
    "ðŸ‘¾",
    "ðŸ¤–",
    "ðŸŽƒ",
    "ðŸ˜º",
    "ðŸ˜¸",
    "ðŸ˜¹",
    "ðŸ˜»",
    "ðŸ˜¼",
    "ðŸ˜½",
    "ðŸ™€",
    "ðŸ˜¿",
    "ðŸ˜¾",
    "ðŸ¶",
    "ðŸ±",
    "ðŸ­",
    "ðŸ¹",
    "ðŸ°",
    "ðŸ¦Š",
    "ðŸ»",
    "ðŸ¼",
    "ðŸ¨",
    "ðŸ¯",
    "ðŸ¦",
    "ðŸ®",
    "ðŸ·",
    "ðŸ¸",
    "ðŸµ",
    "ðŸ™ˆ",
    "ðŸ™‰",
    "ðŸ™Š",
    "ðŸ”",
    "ðŸ§",
    "ðŸ¦",
    "ðŸ¤",
    "ðŸ£",
    "ðŸ¥",
    "ðŸ¦†",
    "ðŸ¦…",
    "ðŸ¦‰",
    "ðŸ¦‡",
    "ðŸº",
    "ðŸ—",
    "ðŸ´",
    "ðŸ¦„",
    "ðŸ",
    "ðŸ›",
    "ðŸ¦‹",
    "ðŸŒ",
    "ðŸž",
    "ðŸœ",
    "ðŸ¦Ÿ",
    "ðŸ¦—",
    "ðŸ•·",
    "ðŸ•¸",
    "ðŸ¦‚",
    "ðŸ¢",
    "ðŸ",
    "ðŸ¦Ž",
    "ðŸ¦–",
    "ðŸ¦•",
    "ðŸ™",
    "ðŸ¦‘",
    "ðŸ¦",
    "ðŸ¦ž",
    "ðŸ¦€",
    "ðŸ¡",
    "ðŸ ",
    "ðŸŸ",
    "ðŸ¬",
    "ðŸ³",
    "ðŸ‹",
    "ðŸ¦ˆ",
    "ðŸŠ",
    "ðŸ…",
    "ðŸ†",
    "ðŸ¦“",
    "ðŸ¦",
    "ðŸ¦§",
    "ðŸ˜",
    "ðŸ¦›",
    "ðŸ¦",
    "ðŸª",
    "ðŸ«",
    "ðŸ¦’",
    "ðŸ¦˜",
    "ðŸƒ",
    "ðŸ‚",
    "ðŸ„",
    "ðŸŽ",
    "ðŸ–",
    "ðŸ",
    "ðŸ‘",
    "ðŸ¦™",
    "ðŸ",
    "ðŸ¦Œ",
    "ðŸ•",
    "ðŸ©",
    "ðŸ¦®",
    "ðŸ•â€ðŸ¦º",
    "ðŸˆ",
    "ðŸ“",
    "ðŸ¦ƒ",
    "ðŸ¦š",
    "ðŸ¦œ",
    "ðŸ¦¢",
    "ðŸ¦©",
    "ðŸ•Š",
    "ðŸ‡",
    "ðŸ¦",
    "ðŸ¦¨",
    "ðŸ¦¡",
    "ðŸ¦¦",
    "ðŸ¦¥",
    "ðŸ",
    "ðŸ€",
    "ðŸ¿",
    "ðŸ¦”",
    "ðŸ¾",
    "ðŸ‰",
    "ðŸ²",
    "ðŸŒµ",
    "ðŸŽ„",
    "ðŸŒ²",
    "ðŸŒ³",
    "ðŸŒ´",
    "ðŸŒ±",
    "ðŸŒ¿",
    "â˜˜ï¸",
    "ðŸ€",
    "ðŸŽ",
    "ðŸŽ‹",
    "ðŸƒ",
    "ðŸ‚",
    "ðŸ",
    "ðŸ„",
    "ðŸŒ¾",
    "ðŸ’",
    "ðŸŒ·",
    "ðŸŒ¹",
    "ðŸ¥€",
    "ðŸŒº",
    "ðŸŒ¸",
    "ðŸŒ¼",
    "ðŸŒ»",
    "ðŸŒž",
    "ðŸŒ",
    "ðŸŒ›",
    "ðŸŒœ",
    "ðŸŒš",
    "ðŸŒ•",
    "ðŸŒ–",
    "ðŸŒ—",
    "ðŸŒ˜",
    "ðŸŒ‘",
    "ðŸŒ’",
    "ðŸŒ“",
    "ðŸŒ”",
    "ðŸŒ™",
    "ðŸŒŽ",
    "ðŸŒ",
    "ðŸŒ",
    "ðŸª",
    "ðŸ’«",
    "â­ï¸",
    "ðŸŒŸ",
    "âœ¨",
    "âš¡ï¸",
    "â˜„ï¸",
    "ðŸ’¥",
    "ðŸ”¥",
    "ðŸŒª",
    "ðŸŒˆ",
    "â˜€ï¸",
    "ðŸŒ¤",
    "â›…ï¸",
    "ðŸŒ¥",
    "â˜ï¸",
    "ðŸŒ¦",
    "ðŸŒ§",
    "â›ˆ",
    "ðŸŒ©",
    "ðŸŒ¨",
    "â„ï¸",
    "â˜ƒï¸",
    "â›„ï¸",
    "ðŸŒ¬",
    "ðŸ’¨",
    "ðŸ’§",
    "ðŸ’¦",
    "â˜”ï¸",
    "â˜‚ï¸",
    "ðŸŒŠ",
    "ðŸŒ«",
  ]

  const randomIndex = Math.floor(Math.random() * avatarEmojis.length)
  return avatarEmojis[randomIndex]
}
